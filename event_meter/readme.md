# Модуль измерения временных интервалов между событиями

## Описание
Модуль `event_meter` предоставляет простой и эффективный способ измерения временных интервалов между повторяющимися событиями в системах реального времени. Реализация оптимизирована для минимальных накладных расходов и позволяет собирать статистику по последним N измерениям.

## Особенности
- Минимальные накладные расходы при замере времени
- Циклический буфер для хранения последних измерений
- Статистическая обработка (min, max, avg)
- Гибкая конфигурация размера буфера и единиц измерения
- Два интерфейса получения данных: вывод в консоль и программный доступ

## Использование

### Инициализация
```c
#include "event_meter.h"

// Инициализация измерителя
event_meter_t my_event = EVENT_METER_INIT("my_event");
```

### Замер временных интервалов
```c
void event_handler() {
    uint32_t current_time = micros(); // Или другая функция времени
    event_meter_record(&my_event, current_time);
}
```

### Получение статистики программно
```c
uint32_t min, max, avg;
if(event_meter_get_stats(&my_event, &min, &max, &avg)) {
    // Использовать полученные значения
    process_stats(min, max, avg);
}
```

### Вывод статистики в консоль
```c
event_meter_show(&my_event);
```

## Пример вывода
```
my_event max = 16660 us
my_event min = 16610 us
my_event avg = 16635 us
```

## Конфигурация

### Размер буфера измерений
По умолчанию: 16 измерений  
Переопределение:
```c
#define EVENT_METER_BUF_LEN 32
#include "event_meter.h"
```

### Единицы измерения времени
По умолчанию: микросекунды ("us")  
Переопределение:
```c
#define EVENT_METER_TIME_UNIT "ms"
#include "event_meter.h"
```

### Символы конца строки
По умолчанию: "\r\n"  
Переопределение:
```c
#define ENDL "\n"
#include "event_meter.h"
```

## Ограничения
1. Требуется минимум `EVENT_METER_BUF_LEN + 1` вызовов `event_meter_record()` для получения статистики
2. Первый вызов `event_meter_record()` только инициализирует начальное время, но не создает измерение
3. Работает с 32-битными значениями времени (максимальный измеряемый интервал ~1.2 часа для микросекунд)
4. Не потокобезопасен при использовании в многопоточных средах без синхронизации
5. Среднее значение вычисляется как целое число (без дробной части)

## Автор
Михаил Каа (Mikhael Kaa)  
Версия 1.0 (21.07.2025)

## Файлы модуля
- `event_meter.h` - заголовочный файл
- `event_meter.c` - реализация функций

## Лицензия
Модуль распространяется под лицензией MIT. Свободен для использования в коммерческих и некоммерческих проектах.